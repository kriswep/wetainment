{"componentChunkName":"component---src-templates-blog-post-js","path":"/wid-2018-04-11/","result":{"data":{"markdownRemark":{"html":"<h4>Testing morphlog</h4>\n<p><strong>Tl,dr: Hey, my name is Benjamin and here I write about the things I made during the last week (or more). This mostly involves coding projects in my spare time. Today, let’s talk about <a href=\"https://github.com/kriswep/morphlog\">morphlog</a>.</strong></p>\n<ul>\n<li><a href=\"/wid-2018-03-27/\">WiD - What I Did | Part 1</a></li>\n<li><a href=\"/wid-2018-04-11/\">WiD - What I Did | Part 2 (This post!)</a></li>\n</ul>\n<p>So, time for an upgrade, progress has been made. The last ~two weeks I focused on getting the test story up for morphlog. More specificially, adding end to end test using <a href=\"https://www.cypress.io/\">Cypress</a>, another hot tech piece. And after fiddling around some problems, it feels kinda good to have true e2e tests running.</p>\n<p>While I was on that, it made sense to also set up CI. I used <a href=\"https://travis-ci.org/\">Travis CI</a> some times in the past, it works great. This time the decision was made for <a href=\"https://circleci.com/\">CircleCI</a>, which, well also works great. To be honest, if you are on a hunt for CI, just use one of these, both soild choices. What’s compelling about CircleCI is their usage of Docker, really cool.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.08108108108109%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABAAD/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAVFUWxdhH//EABwQAAEDBQAAAAAAAAAAAAAAAAEAAiEDESIyM//aAAgBAQABBQI4tAu+E3WvzBj/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAaEAABBQEAAAAAAAAAAAAAAAARAAEQEkFC/9oACAEBAAY/AiEXWRfptj//xAAaEAADAQADAAAAAAAAAAAAAAAAAREhQWHR/9oACAEBAAE/IZYiGcOvWjfo2z5MwyEDIfR//9oADAMBAAIAAwAAABAzH//EABcRAQEBAQAAAAAAAAAAAAAAAAERACH/2gAIAQMBAT8QgvckZv/EABcRAQEBAQAAAAAAAAAAAAAAAAERACH/2gAIAQIBAT8QqHMNLv/EAB0QAQADAAIDAQAAAAAAAAAAAAEAESFBYTFRkbH/2gAIAQEAAT8Q16BQhvRFpNKL4fT9xmQgs5aRWnB2Nd0dJpLdOzpi71KFor8n/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"A hand reaching towards a cloudy sky.\"\n        title=\"A hand reaching towards a cloudy sky.\"\n        src=\"/static/1f877ffd00575fe7e07db9b25dad699c/1c72d/cloud-hand.jpg\"\n        srcset=\"/static/1f877ffd00575fe7e07db9b25dad699c/a80bd/cloud-hand.jpg 148w,\n/static/1f877ffd00575fe7e07db9b25dad699c/1c91a/cloud-hand.jpg 295w,\n/static/1f877ffd00575fe7e07db9b25dad699c/1c72d/cloud-hand.jpg 590w,\n/static/1f877ffd00575fe7e07db9b25dad699c/a8a14/cloud-hand.jpg 885w,\n/static/1f877ffd00575fe7e07db9b25dad699c/fbd2c/cloud-hand.jpg 1180w,\n/static/1f877ffd00575fe7e07db9b25dad699c/857b3/cloud-hand.jpg 6000w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><sub><sup>Clouds for tests in the cloud. Photo by <a href=\"https://unsplash.com/@jeremyperkins\">Jeremy Perkins</a> on <a href=\"https://unsplash.com/photos/7FOSJVtUtac\">Unsplash</a>.</sup></sub></p>\n<h4>Difficulties</h4>\n<p>Like always when using things I’m not too familiar with, I faced some issues. All of them could be solved and where mostly my misusage, but let’s add them regardless.</p>\n<p>Difficulties:</p>\n<ul>\n<li>Starting clean server (or mocking server calls)</li>\n<li>New Cypress API has to be used</li>\n<li>Cypress can read and write to localStorage, but only in custom commands, not in test files</li>\n<li>Different port(env) was used on CircleCI for client server than on local env</li>\n<li>I specified the wrong Prisma endpoint for the tests. Took me way too long to figure out.</li>\n</ul>\n<p>The first point was actually made really easy for me. As mentioned in my <a href=\"/wid-2018-03-27/\">first WiD post</a> I’m using <a href=\"https://www.prisma.io/\">Prisma</a> for my backend / database layer. They have a free and public development cloud option. Using that as backend during my CI tests means I have a full, real backend without having to set anything special up (like a database). As far as I understood, the data there will be whiped sometime. That’s no problem for my usage, since I seed the expected data during the CI test run in there, and don’t care what happens to them afterwards. It could become problematic if a lot of tests run at the same time. That’s a future problem (if at all).</p>\n<p>The other points where things I didn’t grasp right away and hat to find out through trial and error. That’s ok, still fun!</p>\n<p>Oh, and I registered <a href=\"https://morphlog.com\">morphlog.com</a>!</p>","fields":{"slug":"/articles/2018-04-06-What-I-Did/"},"frontmatter":{"date":"April 11, 2018","path":"/wid-2018-04-11/","title":"WiD - Cypress e2e testing","description":"Setting up end to end tests with Cypress.io, automated and run on CircleCI.","author":"@kriswep","layout":"post","readNext":"/articles/2018-06-What-I-Did/","issueNumber":19}},"readNext":{"frontmatter":{"date":"June 30, 2018","path":"/wid-2018-06-30/","title":"WiD - Universal React Components","description":"Rendering React Components on native devices and on web. Reuse as much or little as you want."}},"site":{"siteMetadata":{"title":"wetainment","siteUrl":"https://wetainment.com"}}},"pageContext":{"slug":"/articles/2018-04-06-What-I-Did/","readNext":"/articles/2018-06-What-I-Did/"}},"staticQueryHashes":[]}